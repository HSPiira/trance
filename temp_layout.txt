'use client'

import { useEffect, useState } from 'react'
import { useRouter, usePathname } from 'next/navigation'
import { useAuth } from '@/lib/auth'
import { cn } from '@/lib/utils'
import {
    LayoutDashboard,
    Users,
    BookOpen,
    Settings,
    Menu,
    X,
    LogOut,
    Bell,
    Search,
    ChevronDown,
    User,
    Shield,
    Moon,
    Sun,
    UserCircle,
    Calendar,
    CreditCard,
    MessageSquare,
    HeartHandshake
} from 'lucide-react'
import { Button } from '@/components/ui/button'
import { Input } from '@/components/ui/input'
import {
    DropdownMenu,
    DropdownMenuContent,
    DropdownMenuItem,
    DropdownMenuLabel,
    DropdownMenuSeparator,
    DropdownMenuTrigger,
} from '@/components/ui/dropdown-menu'
import { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar'
import { Badge } from '@/components/ui/badge'
import { Separator } from '@/components/ui/separator'
import { useTheme } from 'next-themes'

export default function AdminLayout({
    children,
}: {
    children: React.ReactNode
}) {
    const router = useRouter()
    const pathname = usePathname()
    const { user, signOut } = useAuth()
    const { theme, setTheme } = useTheme()
    const [isSidebarOpen, setIsSidebarOpen] = useState(true)
    const [isLoading, setIsLoading] = useState(true)
    const [notifications, setNotifications] = useState([
        { id: 1, title: 'New counsellor application', time: '5 minutes ago', read: false },
        { id: 2, title: 'System update completed', time: '1 hour ago', read: false },
        { id: 3, title: 'New resource published', time: '2 hours ago', read: true },
    ])

    useEffect(() => {
        // Wait a bit for auth to initialize
